## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
filter(df, age == in_age & sex == in_sex) %>% select(pif_name)
}
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * GetPif(pif, age, sex, "scen_pif_pa_ac")
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
test_pif <- (pif, 22, "male", "scen_pif_pa_ac")
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
test_pif <- GetPif(in_pif = pif, 22, "male", "scen_pif_pa_ac")
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
filter(df, age == in_age & sex == in_sex) %>% select(pif_name)
}
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
require(dplyr)
require(tidyverse)
require(knitr)
require(kableExtra)
require(citr)
require(gridExtra)
require(ggpubr)
require(grid)
require(ggplot2)
require(pillar)
require(devtools)
require(janitor)
disease_short_names %>% tolower(disease_short_names$disease)
disease_short_names <- data.frame(disease = as.character(unique(tolower(data_extracted$cause_name))),
sname = tolower(abbreviate(unique(data_extracted$cause_name, max = 2))),
stringsAsFactors = F)
disease_short_names <- disease_short_names %>% mutate(is_not_dis = ifelse((str_detect(disease, "injuries") |
str_detect(disease, "All causes") |
str_detect(disease, "Lower respiratory infections")),
1, 0) )
disease_short_names[disease_short_names$sname == "allc", "is_not_dis"] <- 2
disease_short_names <- data.frame(disease = tolower(as.character(unique(data_extracted$cause_name))),
sname = tolower(abbreviate(unique(data_extracted$cause_name, max = 2))),
stringsAsFactors = F)
disease_short_names <- disease_short_names %>% mutate(is_not_dis = ifelse((str_detect(disease, "injuries") |
str_detect(disease, "All causes") |
str_detect(disease, "Lower respiratory infections")),
1, 0) )
disease_short_names[disease_short_names$sname == "allc", "is_not_dis"] <- 2
disease_names_execute <- as.data.frame(tolower(disease_names_execute[1:2]))
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
names(disease_names_execute)[1] <- "disease"
disease_names_execute <- as.data.frame(tolower(disease_names_execute[1:2]))
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
disease_names_execute <- tolower(disease_names_execute[1:2])
disease_names_execute <- disease_names_execute[1:2]
disease_names_execute <- read_csv("C:/Users/Bele/Dropbox/Collaborations/James Woodcock/mh-execute/inputs/dose_response/disease_outcomes_lookup.csv")
names(disease_names_execute)[1] <- "disease"
disease_names_execute <- disease_names_execute[1:2]
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
disease_names_execute <- disease_names_execute[1:2] %>% tolower
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
names(disease_names_execute)[1] <- "disease"
disease_names_execute <- disease_names_execute[1:2]
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
disease_names_execute <- read_csv("C:/Users/Bele/Dropbox/Collaborations/James Woodcock/mh-execute/inputs/dose_response/disease_outcomes_lookup.csv")
names(disease_names_execute)[1] <- "disease"
disease_names_execute <- disease_names_execute[1:2]
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
View(disease_names_execute)
names(disease_names_execute)[1] <- "disease"
disease_names_execute <- disease_names_execute[1:2]
tolower(disease_names_execute$disease)
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
disease_short_names <- data.frame(disease = tolower(as.character(unique(data_extracted$cause_name))),
sname = tolower(abbreviate(unique(data_extracted$cause_name, max = 2))),
stringsAsFactors = F)
disease_short_names <- disease_short_names %>% mutate(is_not_dis = ifelse((str_detect(disease, "injuries") |
str_detect(disease, "All causes") |
str_detect(disease, "Lower respiratory infections")),
1, 0) )
disease_short_names[disease_short_names$sname == "allc", "is_not_dis"] <- 2
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
names(disease_names_execute)[1] <- "disease"
disease_names_execute <- disease_names_execute[1:2]
tolower(disease_names_execute$disease)
disease_names_execute$disease <- tolower(disease_names_execute$disease)
disease_names_execute <- read_csv("C:/Users/Bele/Dropbox/Collaborations/James Woodcock/mh-execute/inputs/dose_response/disease_outcomes_lookup.csv")
disease_names_execute <- disease_names_execute[1:2]
disease_names_execute$disease <- tolower(disease_names_execute$disease)
disease_names_execute <- read_csv("C:/Users/Bele/Dropbox/Collaborations/James Woodcock/mh-execute/inputs/dose_response/disease_outcomes_lookup.csv")
disease_names_execute <- disease_names_execute[1:2]
disease_names_execute$disease <- tolower(disease_names_execute$GBD_name)
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
disease_short_names <- data.frame(disease = tolower(as.character(unique(data_extracted$cause_name))),
sname = tolower(abbreviate(unique(data_extracted$cause_name, max = 2))),
stringsAsFactors = F)
disease_short_names <- disease_short_names %>% mutate(is_not_dis = ifelse((str_detect(disease, "injuries") |
str_detect(disease, "All causes") |
str_detect(disease, "Lower respiratory infections")),
1, 0) )
disease_short_names[disease_short_names$sname == "allc", "is_not_dis"] <- 2
disease_short_names <- left_join(disease_short_names, disease_names_execute, by = "disease")
source("code/functions.R")
#
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
View(test_pif)
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * GetPif(pif, age, sex, "scen_pif_pa_ac")
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * rate_ratio_mortality
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * GetPif(pif, age, sex, "scen_pif_pa_ac")
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * 1
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
View(non_disease_list[[1]])
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
as.numeric(filter(df, age == in_age & sex == in_sex) %>% select(pif_name))
}
# #
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
p <- filter(df, age == in_age & sex == in_sex) %>% select(pif_name)
return(p)
}
# #
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
# GetPif (for Metahit)
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
p <- as.numeric(filter(df, age == in_age & sex == in_sex) %>% select(pif_name))
return(p)
}
# #
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
p <- c(filter(df, age == in_age & sex == in_sex) %>% select(pif_name))
return(p)
}
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
p <- c(as.numeric(filter(df, age == in_age & sex == in_sex) %>% select(pif_name)))
return(p)
}
# #
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
View(test_pif)
class(test_pif)
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
p <- filter(df, age == in_age & sex == in_sex) %>% select(pif_name)
return(p)
}
# #
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
class(test_pif)
GetPif <- function(in_pif, in_age, in_sex, pif_name){
df <- in_pif
p <- c(as.numeric(filter(df, age == in_age & sex == in_sex) %>% select(pif_name)))
return(p)
}
# #
test_pif <- GetPif(pif, 22, "male", "scen_pif_pa_ac")
class(test_pif)
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * GetPif(pif, age, sex, "scen_pif_pa_ac")
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * 1
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * 1
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
View(non_disease_list[[1]])
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## Added column to test whta is bringing in
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-  as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * 1
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## Added column to test whta is bringing in
non_disease_list[[index]]$test <-  as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * 1
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
non_disease_list <- list()
index <- 1
for (age in i_age_cohort) {
for (sex in i_sex) {
for (d in 1:nrow(disease_short_names)){
## Exclude chronic disease and all-cause mortality and pyld
if (disease_short_names$is_not_dis[d] == 0 || disease_short_names$is_not_dis[d] == 2) {
}
else {
non_disease_list[[index]] <-  RunNonDisease (mslt_df, in_sex = sex, in_mid_age = age, in_non_disease = disease_short_names$sname[d])
## Add road injuries sceanrio deaths_rates and yld_rates
if (disease_short_names$sname[d] == "lwri") {
## deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## Added column to test whta is bringing in
non_disease_list[[index]]$test <-  0
# as.numeric(GetPif(pif, age, sex, "scen_pif_pa_ac"))
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
else {
# deaths sceanario
non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])] * 1
## ylds scenario
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] * 1
}
## Difference variable
## deaths difference
non_disease_list[[index]][paste0("deaths_rate_diff_", disease_short_names$sname[d])] <- non_disease_list[[index]][paste0("deaths_rate_", disease_short_names$sname[d])]
- non_disease_list[[index]][paste0("deaths_rate_sc_", disease_short_names$sname[d])]
## ylds difference
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_diff_", disease_short_names$sname[d])] <-
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_", disease_short_names$sname[d])] -
non_disease_list[[index]][paste0("ylds (years lived with disability)_rate_sc_", disease_short_names$sname[d])]
index <- index + 1
}
}
}
}
pif$scen_pif_pa_breast <- pif$pif_breast
pif$scen_pif_pa_breast <- pif$pif_breast
pif$scen_pif_pa_ap_noise_no2_ihd <- pif$pif_ihd
colnames(pif)['scen_pif_pa_ap_noise_no2_ihd'] <- pif_ihd
colnames(pif)["scen_pif_pa_ap_noise_no2_ihd"] <- "pif_ihd"
colnames(pif)["scen_pif_pa_breast"] <- "pif_breast"
names(pif)[names(pif) == "scen_pif_ap_lri"] <- "pif_lri"
View(pif)
